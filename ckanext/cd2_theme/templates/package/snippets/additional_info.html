
{% if pkg_dict.type == 'wave' %}
<script>
  document.addEventListener("DOMContentLoaded", function (event) {
    navTabs = document.getElementsByClassName('nav-tabs');
    navTabs[0].innerHTML = `<ul class="nav nav-tabs">
      <li><a href="/dataset/?organization={{ pkg_dict.organization.name }}&amp;dataset_type=dataset&amp;wave_title={{ pkg_dict.title }}"><i class="fa fa-sitemap"></i> Datasets</a></li>
      <li class="active"><a href="#"><i class="fa fa-info-circle"></i> About</a></li></ul>`  
  });
</script>
{% elif pkg_dict.type == 'cohort' %}
<script>
  document.addEventListener("DOMContentLoaded", function (event) {
    datasetLink = document.getElementsByClassName('fa fa-sitemap')[0].parentElement;
    datasetLink.innerHTML = '<span class="fa fa-folder-open-o"></span> Cohort'
  });
</script>
{% endif %}
<section class="additional-info">
  <table class="table table-striped table-condensed dropshadow">
    <tbody>
    <tr id="relationship"></tr>
    {% if pkg_dict.type == 'dataset' %}
    <tr>
      <th style="width: 20%" scope="row" class="dataset-label">Labels</th>
      <td class="dataset-details">
      <ul class="dataset-resources list-unstyled">
      {% set labels = pkg_dict.dc_labels %}
      {% for label in labels  %}
        {% if label.length != 0 %}
        {% set labelname = label["dc_label"] %}
        <li>
          <a href="{% url_for 'dataset.search', dc_label=labelname %}" class="label label-info">{{label["dc_label"]}}</a>
      </li>
        {% endif %}
      {% endfor %}
      </ul>
      </td>
    </tr>

    <tr>
      <th scope="row" class="dataset-label">Constructs</th>
      <td class="dataset-details">
      <ul class="dataset-resources list-unstyled">
      {% set constructs = pkg_dict.dc_constructs %}
      {% for construct in constructs  %}
      {% if construct.length != 0 %}
      {% set constructname = construct["dc_construct"] %}
        <li>
          <a href="{% url_for 'dataset.search', dc_construct=constructname %}" class="label label-info">{{construct["dc_construct"]}}</a>
          </li>
        {% endif %}
      {% endfor %}
    </ul>
    </td>
    </tr>

    <tr>
      <th scope="row" class="dataset-label">Available measurements:</th>
      <td class="dataset-details">
      <ul class="dataset-resources list-unstyled">

      {% set waves = pkg_dict.wave %}
      {% set waves_passed = [] %}
      {% for wave in waves %}
              {% if wave.wave_cohort not in waves_passed %}
              {% do waves_passed.append(wave.wave_cohort) %}
              {% if waves_passed|length > 1 %}
              <br />
              {% endif %}
              <li>{{ wave.wave_cohort }}</li>&nbsp;
              {% endif %}
            
              <span class="cohort-spanner"><li data-toggle="tooltip" data-original-title="{{ wave.wave_description }}"><a href="/wave/{{ wave.wave_ckan_id }}" class="label label-info">{{wave.wave_title}}</a></li> <span class="label">{{ wave.wave_subject_codes | replace("[","") | replace("]","") | replace("'","") }}</span></span>
      {% endfor %}

      </ul>
      </td>
    </tr>
      
      {% elif pkg_dict.type == 'cohort' %}
      <tr>
        <th scope="row" class="dataset-label">Waves:</th>
        <td class="dataset-details">
        <ul class="dataset-resources list-unstyled">
        {% for wave in pkg_dict.cohort_waves %}
                <li><a href="/wave/{{wave.cohort_wave}}" class="label label-info">{{wave.cohort_wave}}</a></li>
        {% endfor %}
        </ul>
        </td>
      </tr>

      {% elif pkg_dict.type == 'wave' %}
      <tr>
        <th scope="row" class="dataset-label">Parent cohort:</th>
        <td class="dataset-details">
        <ul class="dataset-resources list-unstyled">
        <li><a href="/cohort/{{pkg_dict.wave_cohort}}" class="label label-info">{{pkg_dict.wave_cohort}}</a></li>
        </ul>
        </td>
      </tr>

      {% endif %}



      {% block package_additional_info %}
      {% endblock %}
      
    </tbody>
  </table>


  <div class="debug" style="display:none">
    <table class="table table-striped table-condensed">
      {% for key, value in pkg_dict.items() %}
        <tr><td>{{key}}</td><td>{{value}}</td></tr>
      {% endfor %}
     </table>
  </div>
</section>



