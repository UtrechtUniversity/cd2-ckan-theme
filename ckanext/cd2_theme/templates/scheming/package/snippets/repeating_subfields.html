{% set fields = data[field.field_name] %}

{% block subfield_display %}
  {% for field_data in fields %}
    <div class="panel panel-default">
      <div class="panel-body">
        <dl class="scheming-subfield-list">
          {% for subfield in field.repeating_subfields %}
            <dt class="dataset-label">
              {% if h.scheming_language_text(subfield.label) == 'Creator' %}
              <span class="fa fa-user"></span> 
              {% elif h.scheming_language_text(subfield.label) == 'Affiliation' %} 
              <span class="fa fa-building"></span> 
              {% elif h.scheming_language_text(subfield.label) == 'Identifier' %} 
              <span class="fa fa-id-card"></span> 
              {% elif h.scheming_language_text(subfield.label) == 'Identifier type' %} 
              <span class="fa fa-info-circle"></span> 
              {% elif h.scheming_language_text(subfield.label) == 'Funder name' %} 
              <span class="fa fa-university"></span> 
              {% elif h.scheming_language_text(subfield.label) == 'Grant number' %} 
              <span class="fa fa-hashtag"></span> 
              {% elif h.scheming_language_text(subfield.label) == 'Citation' %} 
              <span class="fa fa-share-alt"></span> 
              {% elif h.scheming_language_text(subfield.label) == 'Reference type' %} 
              <span class="fa fa-info-circle"></span> 
              {% elif h.scheming_language_text(subfield.label) == 'Publisher name' %} 
              <span class="fa fa-user"></span> 
              {% elif h.scheming_language_text(subfield.label) == 'Publisher ID' %} 
              <span class="fa fa-id-card"></span> 
              {% elif h.scheming_language_text(subfield.label) == 'Publisher ID-type' %} 
              <span class="fa fa-info-circle"></span> 
              {% endif %}
              {{ h.scheming_language_text(subfield.label) }}
            </dt>
            <dd class="repeating-element">
            {%- snippet 'scheming/snippets/display_field.html',
              field=subfield,
              data=field_data,
              entity_type=entity_type,
              object_type=object_type
            -%}
            
            </dd>
          {% endfor %}
        </dl>
      </div>
    </div>
  {% endfor %}
{% endblock %}


<script>
document.addEventListener("DOMContentLoaded", function (event) {
  const el = document.getElementsByClassName('repeating-element');
  for (const field of el) {
    if (field.innerHTML.startsWith('http')) {
      field.innerHTML = `<a href="`+ field.innerHTML +`" target="blank">` + field.innerHTML + `</a>`;
    }
  }
}
</script>